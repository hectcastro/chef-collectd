#
# This file is generated by Chef
# Do not edit, changes will be overwritten
#
LoadPlugin "<%= @name %>"

<% if not @config.empty? %>
<Plugin "<%= @name %>">
  <% @config['queries'].each_pair do |q_name, q_details| %>
  <Query "<%= q_name %>">
      Statement "<%= q_details['statement'] %>"
      <Result>
      <% q_details['result'].each_pair do |key, value|
        if value.is_a? Array
          value.each do |subvalue| %>
      <%= key %> <%= collectd_option(subvalue) %>
      <% end else %>
      <%= key %> <%= collectd_option(value) %>
      <% end end %>
      </Result>
  </Query>
  <% end %>
  <% @config['database'].each_pair do |db_name, db_details| %>
  <Database "<%= db_name %>">
    <% db_details.each_pair do |key, value|
      if value.is_a? Array
        value.each do |subvalue| %>
    <%= key %> <%= collectd_option(subvalue) %>
    <% end else %>
    <%= key %> <%= collectd_option(value) %>
    <% end end %>
  </Database>
  <% end %>
</Plugin>
<% end %>
